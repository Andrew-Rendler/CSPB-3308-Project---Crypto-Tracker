<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/luxon@1.24.1"></script>
		<script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.0-beta.9/dist/chart.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@0.2.1"></script>

    <script src="{{url_for('static', filename='chartjs-chart-financial.js')}}" type="text/javascript"></script>
		<link rel="icon" href="./favicon.ico"/>


      <!-- update me -->
    <link rel="stylesheet" href="{{ url_for('static',filename='calcStyle.css') }}">
    <link href="https://fonts.googleapis.com/css?family=Arvo" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='Stylesheet.css') }}">
    <title>Crypto Tracker 6000</title>
  </head>
  <body style="background-color: black;">


    <div class="container" id="home">
      <div class="row">
        <ul class="menu">
          <li class="menu-item"><a class="active" href="#home" onclick="displayBit()">Bitcoin</a></li>
          <li class="menu-item"><a class="active" href="#home" onclick="displayDoge()">Dogecoin</a></li>
          <li class="menu-item"><a class="active" href="#home" onclick="displayEther()">Ethereum</a></li>
        </ul>
      </div>

      <div class="cryptocharts">
        <script>
          function displayBit(){
            var B = document.getElementById("bit");
            var D = document.getElementById("doge");
            var E = document.getElementById("ether");

           if (B.style.display == "none"){
              B.style.display = "block";
              D.style.display = "none";
              E.style.display = "none";
              document.querySelector(".bitcnv").id="chart";
              document.querySelector(".dogecnv").id="temp";
              document.querySelector(".ethercnv").id="temp";
              document.getElementById("chart").remove();
              let canvas = document.createElement('canvas');
              canvas.setAttribute('id','chart');
              canvas.setAttribute('class','bitcnv');
              canvas.setAttribute('width','100%');
              canvas.setAttribute('height','60%');
              document.querySelector('#bit-div').appendChild(canvas);
              cb = new ChartBuilder(INTERVAL)
              cb.fetchData(url).then(res => {
              cb.cleanData(res)
              })
            }
          }
          function displayDoge(){
            var B = document.getElementById("bit");
            var D = document.getElementById("doge");
            var E = document.getElementById("ether");

            if (D.style.display == "none"){
              D.style.display = "block";
              B.style.display = "none";
              E.style.display = "none";
              document.querySelector(".bitcnv").id="temp";
              document.querySelector(".dogecnv").id="chart";
              document.querySelector(".ethercnv").id="temp";
              document.getElementById("chart").remove();
              let canvas = document.createElement('canvas');
              canvas.setAttribute('id','chart');
              canvas.setAttribute('class','dogecnv');
              canvas.setAttribute('width','100%');
              canvas.setAttribute('height','60%');
              document.querySelector('#doge-div').appendChild(canvas);
              cb = new ChartBuilder(INTERVAL)
              cb.fetchData(url).then(res => {
              cb.cleanData(res)
              })
            }
          }
          function displayEther(){
            var B = document.getElementById("bit");
            var D = document.getElementById("doge");
            var E = document.getElementById("ether");
            if (E.style.display == "none"){
              E.style.display = "block";
              B.style.display = "none";
              D.style.display = "none";
              document.querySelector(".bitcnv").id="temp";
              document.querySelector(".dogecnv").id="temp";
              document.querySelector(".ethercnv").id="chart";
              document.getElementById( "chart" ).remove();
              let canvas = document.createElement('canvas');
              canvas.setAttribute('id','chart');
              canvas.setAttribute('class','ethercnv');
              canvas.setAttribute('width','100%');
              canvas.setAttribute('height','60%');
              document.querySelector('#ether-div').appendChild(canvas);
              cb = new ChartBuilder(INTERVAL)
              cb.fetchData(url).then(res => {
              cb.cleanData(res)
              })
            }
          }
        </script>
      <div id="bit" style="display:block">
        <div class="row">
          <div class="col-sm-8" id="bit-div">
              <canvas class="bitcnv"id="chart" width=100% height=60%></canvas>
          </div>
          <div class="col-sm-4">
            <img src="news.jfif" alt="bit news" width=100% height=100%/>
          </div>
        </div>
        <div class="col-sm-4">
           <h5>
	  <p><a href={{ info.URL1 }}>{{ info.title1 }}</a></p>
    </h5>
	<h5>
	  <p><a href={{ info.URL2 }}>{{ info.title2 }}</a></p>
    </h5>
	<h5>
	  <p><a href={{ info.URL3 }}>{{ info.title3 }}</a></p>
    </h5>
	<h5>
	  <p><a href={{ info.URL4 }}>{{ info.title4 }}</a></p>
    </h5>
	<h5>
	  <p><a href={{ info.URL5 }}>{{ info.title5 }}</a></p>
        </div>
      </div>
      <div id="ether" style="display:none">
        <div class="row">
          <div class="col-sm-8" id="ether-div">
            <canvas class="ethercnv" id="chart3" width=100% height=60%></canvas>
          </div>
          <div class="col-sm-4">
            <img src="news.jfif" alt="ether news" width=100% height=100%/>
          </div>
        </div>
      </div>

      <script src="{{url_for('static', filename='CCGraph.js')}}"></script>

    </div>


      <div class="row">


	      <div class="col-sm-4">
		      <div class="current">
            <table class="tablest">
              <tr>
              <br>
              <th > <h1>Current Price</h1> </th>
            </tr>
              <tr>
              <td> <h2 class="price"></h2></td>
            </tr>
          </table>
          </div>
        </div>

        <div class="col-sm-4">
          <div class="current">
            <table class="tablest">
              <tr>
              <br>
              <th > <h1>$ Change</h1>
              <h6 class="change"></h6> </h6>
              </th>
              </tr>
              <tr>
              <td> <h2></h2></td>
              </tr>
            </table>
          </div>
        </div>

        <div class="col-sm-4">
          <div class="current">
            <table class="tablest">
              <tr>
              <br>
              <th > <h1>% Change</h1>
              <h2 class="perChange"></h2></td>
              </th>
              </tr>
              <tr>
              <td> <h6> (Since Last Close) </h6>
              </tr>
            </table>
          </div>
        </div>
      </div>

      <div class = "row">
        <div class="col-sm-4">
          <div class="current">
            <table class="tablest">
              <tr>
              <br>
              <th > <h1>7 Day Average</h1> </th>
              </tr>
              <tr>
              <td> <h2 class="avgPrice"></h2></td>
              </tr>
            </table>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="current">
          <table class="tablest">
            <tr>
            <br>
            <th > <h1>Avg Vol</h1> </th>
            </tr>
            <tr>
            <td> <h2 class="avgVol"></h2></td>
            </tr>
          </table>
        </div>
      </div>

      <div class="col-sm-4">
        <div class="current">
          <table class="tablest">
            <tr>
            <br>
            <th > <h1>Market Cap</h1> </th>
            </tr>
            <tr>
            <td> <h2 class="marketCap"></h2></td>
            </tr>
          </table>
        </div>
        <br>
        <br>
      </div>
      <div class="calcbtn">
        <p class="btntext">
          <a class="link" href="#d1" onclick="display()">Calculator</a>
        </p>
      </div>
      <div class = "allbtns" id= "cal" style="display:none">
        <br>
        <script>
        function sound() {
            var audio = new Audio('/static/sound/click.mp3');
            audio.play();
        }
        function display(){
          var T = document.getElementById("cal");
          if (T.style.display == "block"){
            T.style.display = "none";
          }
          else if (T.style.display == "none"){
            T.style.display = "block";
          }
        }
        </script>
        <div id="d1" class="set">
          <button class="output">0</button>
        </div>
        <div class="set">
          <button class="AC btn clear" onclick = "sound()">AC</button>
          <button class="f btn" onclick = "sound()">^</button>
          <button class="m btn" onclick = "sound()">%</button>
          <button class="d btn" onclick = "sound()">/</button>
        </div>
        <div class="set">
          <button class="sev btn num" onclick = "sound()">7</button>
          <button class="eig btn num" onclick = "sound()">8</button>
          <button class="nin btn num" onclick = "sound()">9</button>
          <button class="t btn" onclick = "sound()">*</button>
        </div>
        <div class="set">
          <button class="fou btn num" onclick = "sound()">4</button>
          <button class="fiv btn num" onclick = "sound()">5</button>
          <button class="six btn num" onclick = "sound()">6</button>
          <button class="s btn" onclick = "sound()">-</button>
        </div>
        <div class="set">
          <button class="one btn num" onclick = "sound()">1</button>
          <button class="two btn num" onclick = "sound()">2</button>
          <button class="thr btn num" onclick = "sound()">3</button>
          <button class="a btn" onclick = "sound()">+</button>
        </div>
        <div class="set">
          <button class="C btn clear" onclick = "sound()">C</button>
          <button class="zer btn num" onclick = "sound()">0</button>
          <button class="p btn" onclick = "sound()">.</button>
          <button class="e btn" onclick = "sound()">=</button>
        </div>
        <br>
        <br>
      </div>


      <script src="{{url_for('static', filename='calcOp.js')}}" charset="utf-8">
      </script>
    </div>
	<!-- Example sql query to populate Current Price table, and other metrics in math section.

<!--	<?php
$conn = mysqli_connect("localhost", "root", "", "table");
if ($conn->connect_error) {
die("Connection failed: " . $conn->connect_error);
}
$sql = "SELECT MAX(price) FROM login WHERE datestamp = CAST(get_date() AS DATE) AND curr = 'BTC'";
$result = $conn->query($sql);
if ($result->num_rows > 0) {
while($row = $result->fetch_assoc()) {
echo "<tr><td>" . $row["Current Price"]. "</td></tr>";
}
echo "</table>";
} else { echo "0 results"; }
$conn->close();
?>
-->






    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script>
    -->

  </body>
</html>
